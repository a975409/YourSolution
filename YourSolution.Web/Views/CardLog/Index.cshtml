@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
}

<div id="app">
    <table class="table table-hover">
        <caption></caption>
        <thead>
            <tr>
                <th>
                    當下刷卡時間
                </th>
                <th>
                    卡號
                </th>
                <th>
                    姓名
                </th>
                <th>
                    打卡別
                </th>
                <th>
                    打卡地點
                </th>
                <th>
                    打卡機IP
                </th>
                <th>更換卡別</th>
            </tr>
        </thead>
        <tbody>
            <tr v-for="item in searchResult">
                <td>{{item.cardTime}}</td>
                <td>{{item.cardNo}}</td>
                <td>{{item.psnName}}</td>
                <td>{{item.logStatusText}}</td>
                <td>{{item.equName}}</td>
                <td>{{item.mstConnParam}}</td>
                <td v-show="item.logStatus==49 && item.isSyncToWeb"><button type="button" class="btn btn-primary" v-on:click="ChangeLogStatus(50,item.recordID)">更換為下班卡</button></td>
                <td v-show="item.logStatus==50 && item.isSyncToWeb"><button type="button" class="btn btn-primary" v-on:click="ChangeLogStatus(49,item.recordID)">更換為上班卡</button></td>
                <td v-show="item.logStatus!=49 && item.logStatus!=50 || item.isSyncToWeb==false">該筆紀錄無法更換卡別</td>
            </tr>
        </tbody>
    </table>

    @* 頁碼選擇器 *@
    <nav aria-label="Page navigation">
        <ul class="pagination d-flex justify-content-center">
            <li class="page-item"><a class="page-link" v-on:click.prevent="getSearchResult(1)">第一頁</a></li>
            <li v-bind:class="{disabled:searchOption.page<=1,'page-item':true}"><a class="page-link" v-on:click.prevent="PreviousSearch()">上一頁</a></li>
            <li v-for="page in pageSetting.pageRangeList" v-bind:class="{active:pageSetting.page==page,'page-item':true}">
                <a v-show="pageSetting.page==page" class="page-link">{{page}}</a>
                <a v-show="pageSetting.page!=page" class="page-link" v-on:click.prevent="getSearchResult(page)">{{page}}</a>
            </li>
            <li v-bind:class="{disabled:searchOption.page>=pageSetting.totalPage,'page-item':true}"><a class="page-link" v-on:click.prevent="NextSearch()">下一頁</a></li>
            <li class="page-item"><a class="page-link" v-on:click.prevent="getSearchResult(pageSetting.totalPage)">最末頁</a></li>
        </ul>
    </nav>
</div>

@section Scripts {
    <script type="module">
        import { createApp } from 'vue';
        import CardLog_IndexPage from '../js/CardLog_IndexPage.js';

        createApp(CardLog_IndexPage).mount('#app');
    </script>
}